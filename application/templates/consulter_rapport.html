<!DOCTYPE html>
<html>

<head>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Lien vers Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
            integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
            integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
            crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.js"></script>
        <!--lien pour les icones-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"  />
        <!-- notre  fichier css -->
        <link rel="stylesheet" type="text/css" href="/static/style.css">
        <title>  Seismos || Consulter la liste des rapports</title>
    </head>

<body class="rapport">
    
    {% include 'header.html' %}

    <div >
    <section class="d-flex align-items-center justify-content-center position-relative ">
        <!--<div class="overlay position-absolute w-100 h-100"></div>-->
        <div class="container position-relative">
            <div class="row justify-content-center">
                <div class="col-md-8 text-center">
                    <h2 class="text-black text-uppercase mb-4  welcom " style="color: #f03535;">Liste des rapports</h2>
                    <p class="lead  mb-5" style="color: #92644B;"><b></b></p>
                </div>
            </div>
        </div>
    </section>
    <div class="container mt-4">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div style="display: flex; align-items: center;">
                <input type="text" id="inputId" class="form-control input_style px-3 mb-2"  autocomplete="off">
                <span class="input-group-text" style="border-radius: 2rem; margin-left:1%" id="buttonId">
                    <i class="fas fa-search"></i>
                </span>
            </div>
            <a href="{{ url_for('Ajout_rapport') }}">
                <input type="submit" class="submit btn btn-outline-light btn-lg px-3 mb-2 " value="+ Ajouter rapport">
            </a>
        </div>
        <script>
            function redirect() {
                var inputValue = document.getElementById("inputId").value;
                var newUrl = "/filtrer_liste_rapport?valeur=" + encodeURIComponent(inputValue);
                window.location.href = newUrl;
            }
    
            document.getElementById("buttonId").addEventListener("click", redirect);
            document.getElementById("inputId").addEventListener("keyup", function(event) {
                if (event.keyCode === 13) {
                    redirect();
                }
            });
        </script>
        
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>id rapport</th>
                    <th>Titre rapport</th>
                    <th>Mission associée</th>
                    <th>expéditeur</th>
                    <th>Date de dépôt</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    {% for rapport in list_rapports %}
                    <tr>
                        <td>{{ rapport['_id'] }}</td>
                        <td>{{ rapport['titre_rapport'] }}</td>
                        <td>{{ rapport['id_mission'] }}</td>
                        <td>{{ rapport['expediteu'] }}</td>
                        <td>{{ rapport['Date_depot'] }}</td>
                        <td>


                            <div class="d-flex justify-content-center p-3">
                                <a  href="{{ url_for('consulter_Info_rapport', id=rapport['_id']) }}"><i class="fa-solid fa-eye fa-xl" style="color: #ff0000;"></i></a>
                                <a  href="{{ url_for('telecharger_pdf', id=rapport['_id']) }}"><i class="fa-solid fa-file-arrow-down fa-xl ms-3" style="color: #005eff;"></i></a>
                            </div>
                        </td>                    
                    </tr>
                    
                {% endfor %}
                </tr>
            </tbody>
        </table>
    </div>

    <div class="mt-5 mb-5">
        <div class="col-lg-10 text-center text-lg-start">
            
        </div>
    </div>

    <footer class=" footer-custom ">
        <div class="container">
            <div class="row ">
                <div class="col-lg-10 text-center text-lg-start">
                    © PFE année universitaire 2022/2023
                </div>
            </div>
        </div>
    </footer>
</div>

</body>

</html>