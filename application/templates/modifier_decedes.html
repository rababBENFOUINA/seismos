<html!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- lien de bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

   
    <!--lien pour les icones-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"  />
      

    <!-- notre  fichier css -->
    <link rel="stylesheet" type="text/css" href="/static/style.css">

    <!--mon js-->
    <script src="/static/table.js"></script>

    <title>  Seismos || Modifier les informations d'un décédé</title>

</head>
<body class="medical">
            
    {% include 'header.html' %}

    <section class="d-flex align-items-center justify-content-center" style="margin-bottom: -50px;">
      <div class="container position-relative">
        <div class="row no-gutters justify-content-center">
          <div class="col-md-8 text-center">
            <h2 class="text-black text-uppercase mb-2 welcom" style="color: #f03535;">Information décédé</h2>
          </div>
        </div>
      </div>
    </section>



  <form  action="/modifier_deces" method="POST" id="printableArea" enctype="multipart/form-data" novalidate>
    <div class="container py-1  " Style="margin-top:5%;">
        <div class="card text-dark card-custom" >
            <div class="card-body  ">
                <div class="mb-md-2 mt-md-2 " >
                  <div class="row  d-flex justify-content-center align-items-center">
                    <div class="col-md-2 mb-md-0" id="printableArea">
                      {% if info_patient['image'] !=""  %}
                      <img id="profil-img" src="data:image/jpeg;base64,{{info_patient['image'] }}" class="card-img-top" alt="profil">
                      {% else %}
                      <img id="profil-img" src="/static/images/per2.jpg" class="card-img-top" alt="profil">
                      {% endif %}
                      <div class="card-body">
                        <input type="file" class="form-control" placeholder="profil" name="profil" id="profil" accept="application/image/*" onchange="replaceImage()">
                        <div Style="margin-top:3%;">
                          <label class="form-label" for="id_mission">Mission</label>
                          <select class="form-select " aria-label=".form-select-sm example" name="id_mission" value="{{info_patient['id_mission'] }}" id="id_mission">
                                  <option></option>
                                  {% for mission in missions %}
                                      <option value="{{ mission['idmission'] }}" {% if mission['idmission']  == info_patient['id_mission'] %}selected{% endif %}>{{ mission['idmission'] }}</option>
                                  {% endfor %}
                          </select>
                          <a href="{{ url_for('imprimer', id=info_patient['_id']) }}" class="ms-3">
                            <i class="fa-solid fa-print fa-2xl" style="color: #933710; margin-top:25%; margin-left:25% "></i>
                         </a> 
                         
                        </div>  
                      </div>
                    </div>

                    <div class="col-md-3 mb-md-0">

                      <label class="form-label" for="Index_Patient">Index Patient</label>
                      <input type="text" class="form-control" placeholder="Index Patient" aria-label="Index Patient" name="Index" value="{{info_patient['_id']}}" autocomplete="off">
                
                      
                      <div style="display: flex; align-items: center;">
                        <label class="form-label" for="titre_rapport">Prenom</label>
                            {% if messages_erreur.Prenom %}
                                <p class="erreur NoError md-3" style="display: inline-block; vertical-align: middle; font-weight: bold;">* {{ messages_erreur.Prenom }} </p>
                            {% endif %}
                      </div>
                      <input type="text" class="form-control" placeholder="Prenom" aria-label="Prenom" name="Prenom" value={{info_patient['Prenom']}} autocomplete="off">
                  
                      
                      <div style="display: flex; align-items: center;">
                        <label class="form-label" for="titre_rapport">Date de naissance</label>
                          {% if messages_erreur.date %}
                              <p class="erreur NoError md-3" style="display: inline-block; vertical-align: middle; font-weight: bold;">* {{ messages_erreur.date }} </p>
                          {% endif %}
                      </div>
                       <input type="Date" class="form-control" placeholder="Date de naissance" aria-label="Date de naissance" name="date" value="{{info_patient['date_naissance']}}" id="date_naissance" autocomplete="off">
          

                      
                       <div style="display: flex; align-items: center;">
                        <label class="form-label" for="titre_rapport">CIN</label>
                            {% if messages_erreur.CIN %}
                                <p class="erreur NoError md-3" style="display: inline-block; vertical-align: middle; font-weight: bold;">* {{ messages_erreur.CIN }} </p>
                            {% endif %}
                      </div>
                      <input type="text" class="form-control" placeholder="CIN" aria-label="CIN" name="CIN"  value="{{info_patient['CIN']}}" autocomplete="off">
            

                      
                      <div style="display: flex; align-items: center;">
                        <label class="form-label" for="titre_rapport">Ville</label>
                            {% if messages_erreur.Ville %}
                                <p class="erreur NoError md-3" style="display: inline-block; vertical-align: middle; font-weight: bold;">* {{ messages_erreur.Ville }} </p>
                            {% endif %}
                      </div>
                      <input type="text" class="form-control" placeholder="Ville" aria-label="Ville" name="Ville"  value="{{info_patient['Ville']}}" autocomplete="off">
                    </div>
          
                    <div class="col-md-3  mb-md-0">

                      

                      
                      <div style="display: flex; align-items: center;">
                        <label class="form-label" for="titre_rapport">Nom</label>
                            {% if messages_erreur.Nom %}
                                <p class="erreur NoError md-3" style="display: inline-block; vertical-align: middle; font-weight: bold;">* {{ messages_erreur.Nom }} </p>
                            {% endif %}
                      </div>
                      <input type="text" class="form-control" placeholder="Nom" aria-label="Nom" name="Nom" value="{{info_patient['Nom']}}" autocomplete="off">
          

                      
                      <div style="display: flex; align-items: center;">
                        <label class="form-label" for="titre_rapport">Sexe</label>
                            {% if messages_erreur.Sexe %}
                                <p class="erreur NoError md-3" style="display: inline-block; vertical-align: middle; font-weight: bold;">* {{ messages_erreur.Sexe }} </p>
                            {% endif %}
                      </div>
                      
                      <select class="form-select" aria-label=".form-select-sm example" name="Sexe" id="Sexe">
                        <option></option>
                        <option value="Mâle" {% if info_patient['Sexe'] == 'Mâle' %}selected{% endif %}>Mâle</option>
                        <option value="Femelle" {% if info_patient['Sexe'] == 'Femelle' %}selected{% endif %}>Femelle</option>
                      </select>
                      
       
                      <div style="display: flex; align-items: center;">
                        <label class="form-label" for="titre_rapport">Âge</label>
                            {% if messages_erreur.Age %}
                                <p class="erreur NoError md-3" style="display: inline-block; vertical-align: middle; font-weight: bold;">* {{ messages_erreur.Age }} </p>
                            {% endif %}
                      </div>
                      <input type="text" class="form-control" placeholder="Âge" aria-label="Âge" name="Age" value="{{info_patient['Age']}}" id="age" autocomplete="off">
          

                      
                      <div style="display: flex; align-items: center;">
                        <label class="form-label" for="titre_rapport">Numéro de téléphone</label>
                            {% if messages_erreur.telephone %}
                                <p class="erreur NoError md-3" style="display: inline-block; vertical-align: middle; font-weight: bold;">* {{ messages_erreur.telephone }} </p>
                            {% endif %}
                      </div>
                      <input type="text" class="form-control" placeholder="Numéro de téléphone" aria-label="Numéro de téléphone" name="telephone" value="{{info_patient['telephone']}}" autocomplete="off">
          

                      
                      <div style="display: flex; align-items: center;">
                        <label class="form-label" for="titre_rapport">Pays</label>
                            {% if messages_erreur.Payer %}
                                <p class="erreur NoError md-3" style="display: inline-block; vertical-align: middle; font-weight: bold;">* {{ messages_erreur.Payer }} </p>
                            {% endif %}
                      </div>
                      <input type="text" class="form-control" placeholder="Pays" aria-label="Payer" name="Payer" value="{{info_patient['Payer']}}"  autocomplete="off">
                    </div>
                  <div class="row  d-flex justify-content-center align-items-center">
                    <div class="col-md-2  mb-md-0">
                    </div>
                    <div class="col-md-6  mb-md-0">
                      <label class="form-label" for="Adresse">Adresse</label>
                      <input type="text" class="form-control" placeholder="Adresse" aria-label="Adresse" name="Adresse" value="{{info_patient['Adresse']}}" autocomplete="off">
                    </div>
                  </div>
                </div> 
            </div>
          </div> 
      </div>
    </div>
      <script>
        function calculerAge() {
          const inputDateNaissance = document.getElementById("date_naissance");
          const inputAge = document.getElementById("age");
          
          const dateNaissance = new Date(inputDateNaissance.value);
          const maintenant = new Date();
          const age = maintenant.getFullYear() - dateNaissance.getFullYear();
          
          inputAge.value = age;
        }
        
        const inputDateNaissance = document.getElementById("date_naissance");
        inputDateNaissance.addEventListener("change", calculerAge);
        
      </script>
      <div class="container py-1  " Style="margin-top:5%;">
        <div class="card text-dark card-custom" >
            <div class="card-body  ">
                <div class="mb-md-2 mt-md-2 " >
                  <div class="row  d-flex justify-content-center align-items-center">
                    <div class="col-md-3  mb-md-0">
                      <div style="display: flex; align-items: center;">
                        <label class="form-label" for="titre_rapport">Date du décès</label>
                          {% if messages_erreur.date_deces %}
                              <p class="erreur NoError md-3" style="display: inline-block; vertical-align: middle; font-weight: bold;">* {{ messages_erreur.date_deces }} </p>
                          {% endif %}
                      </div>
                      <input type="Date" class="form-control" placeholder="Date de naissance" aria-label="Date de naissance" name="date_deces" id="date_deces" value="{{info_patient['date_deces']}}" autocomplete="off" >


                    </div>  

                    <div class="col-md-3  mb-md-0">
                        <label class="form-label" for="titre_rapport">heure du décès</label>
                        <input type="time" class="form-control" id="heure_deces" name="heure_deces"
                        pattern="([01]?[0-9]|2[0-3]):[0-5][0-9]" value="{{info_patient['heure_deces']}}">
                    </div> 

                    <div class="col-md-3  mb-md-0">
                      <div style="display: flex; align-items: center;">
                        <label class="form-label" for="titre_rapport">Lieu du décès</label>
                            {% if messages_erreur.Lieu_deces %}
                                <p class="erreur NoError md-3" style="display: inline-block; vertical-align: middle; font-weight: bold;">* {{ messages_erreur.Lieu_deces }} </p>
                            {% endif %}
                      </div>
                      <input type="text" class="form-control" placeholder="Lieu du décès" aria-label="Lieu du décès" name="Lieu_deces" id="Lieu_deces" value="{{info_patient['Lieu_deces']}}" autocomplete="off">
          
                    </div> 

                    <div class="row  d-flex justify-content-center m-3 align-items-center">
                      <div class="col col-12 col-md-8 col-lg-6 col-xl-10">
                        <label class="form-label" for="autre_soin">Cause sous-jacente du décès </label>
                        <textarea class="border" id="Caus_deces" name="Caus_deces" placeholder="Cause sous-jacente du décès" rows="4"
                              cols="100" >{{info_patient['Caus_deces']}} </textarea>
                      </div>
                    </div>

                    <div class="row  d-flex justify-content-center m-3 align-items-center">
                      <div class="col col-12 col-md-8 col-lg-6 col-xl-10">
                        <label class="form-label" for="autre_soin">Cause médicale du décès</label>
                        <textarea class="border" id="Cause_medicale_deces" name="Cause_medicale_deces" placeholder="Cause médicale du décès" rows="4"
                              cols="100" > {{info_patient['Cause_medicale_deces']}}</textarea>
                      </div>
                    </div>
                  </div>
                </div> 
            </div>
          </div> 
        </div> 
      </div>    

          <div class="d-flex justify-content-center p-3">
            <input  type="submit"  class="submit btn btn-outline-light btn-lg px-5" name="valider" onclick="printForm()" value="valider" >
          </div>
      
      
      
    </form>  
        
    <footer class=" footer-custom ">
        <div class="container">
          <div class="row ">
            <div class="col-lg-10 text-center text-lg-start">
              © PFE année universitaire 2022/2023
            </div>
          </div>
        </div>
      </footer>
</body>